This is an R wrapper for the MKonline API.

The package is still in early beta.

Make sure to use an unimportant password when using the API.

There are two main functions:

-   mk\_list\_files: This function downloads a list of available documents for download.
-   mk\_download\_file: This function downloads a file based on the key (mk\_file) and the area (mk\_area) listed in the returned object from the function mk\_list\_files.

First, load a few packages.

``` r
library(mkonline)
library(magrittr)
```

List the available files:

``` r
mk_list_files(mk_user = mk_user, mk_password = mk_password, only_accessible = FALSE, time_zone = "GMT") %>% head()
```

    ##   access         category                                     filename
    ## 1  false Coal and Freight Coal Freight Price Forecast Perret Quarterly
    ## 2  false Coal and Freight    Coal Freight Price Forecast Perret Yearly
    ## 3  false Coal and Freight               Coal Freight Spot Price Perret
    ## 4  false Coal and Freight                     Coal inventories monthly
    ## 5  false Coal and Freight                      Coal inventories weekly
    ## 6  false Coal and Freight                 Coal Replacement Cost Perret
    ##                          areaname                     key area
    ## 1 Amsterdam - Rotterdam - Antwerp      COA_PRI_PERRET_Q_F  ara
    ## 2 Amsterdam - Rotterdam - Antwerp      COA_PRI_PERRET_Y_F  ara
    ## 3 Amsterdam - Rotterdam - Antwerp      COA_PRI_PERRET_D_A  ara
    ## 4 Amsterdam - Rotterdam - Antwerp      COA_INV_PERRET_M_S  ara
    ## 5 Amsterdam - Rotterdam - Antwerp      COA_INV_PERRET_W_S  ara
    ## 6 Amsterdam - Rotterdam - Antwerp COA_RPL_COST_PERRET_D_S  ara
    ##               updated
    ## 1 2015-10-22 22:56:00
    ## 2 2015-10-22 22:56:00
    ## 3 2015-10-22 22:56:00
    ## 4 2015-10-14 17:01:00
    ## 5 2015-10-14 17:01:00
    ## 6 2015-10-22 22:56:00

``` r
mk_list_files(mk_user = mk_user, mk_password = mk_password, only_accessible = TRUE, time_zone = "GMT") %>% head()
```

    ## Source: local data frame [6 x 7]
    ## 
    ##   access    category                            filename
    ##    (chr)       (chr)                               (chr)
    ## 1   true Consumption Consumption Hourly 32 Days Forecast
    ## 2   true Consumption Consumption Hourly 32 Days Forecast
    ## 3   true Consumption Consumption Hourly 32 Days Forecast
    ## 4   true Consumption Consumption Hourly 32 Days Forecast
    ## 5   true Consumption Consumption Hourly 32 Days Forecast
    ## 6   true Consumption Consumption Hourly 32 Days Forecast
    ## Variables not shown: areaname (chr), key (chr), area (chr), updated (time)

Download the files:

``` r
mk_download_file(mk_user = mk_user, mk_password = mk_password, key = "PRO_WND_H_N", area = "np") %>% str()
```

    ## Classes 'tbl_df' and 'data.frame':   43823 obs. of  17 variables:
    ##  $ date                           : POSIXct, format: "2014-01-01 01:00:00" "2014-01-01 02:00:00" ...
    ##  $ pro_npa_wnd_normal_mk02_mwh_h_n: num  3654 3640 3631 3626 3617 ...
    ##  $ pro_se_wnd_normal_mk02_mwh_h_n : num  1401 1393 1394 1394 1390 ...
    ##  $ pro_no_wnd_normal_mk02_mwh_h_n : num  327 326 324 325 325 ...
    ##  $ pro_dk_wnd_normal_mk02_mwh_h_n : num  1671 1664 1658 1654 1652 ...
    ##  $ pro_dk1_wnd_normal_mk02_mwh_h_n: num  1307 1300 1296 1294 1292 ...
    ##  $ pro_dk2_wnd_normal_mk02_mwh_h_n: num  365 363 361 360 360 ...
    ##  $ pro_fi_wnd_normal_mk02_mwh_h_n : num  255 256 255 253 250 ...
    ##  $ pro_se1_wnd_normal_mk02_mwh_h_n: num  106 107 108 109 107 ...
    ##  $ pro_se2_wnd_normal_mk02_mwh_h_n: num  270 266 265 267 270 ...
    ##  $ pro_se3_wnd_normal_mk02_mwh_h_n: num  586 584 585 584 582 ...
    ##  $ pro_se4_wnd_normal_mk02_mwh_h_n: num  439 437 436 434 431 ...
    ##  $ pro_no1_wnd_normal_mk02_mwh_h_n: num  NA NA NA NA NA NA NA NA NA NA ...
    ##  $ pro_no2_wnd_normal_mk02_mwh_h_n: num  52.1 51.2 50.1 50.3 50.8 50.3 49.2 48.8 48.7 49 ...
    ##  $ pro_no3_wnd_normal_mk02_mwh_h_n: num  127 127 127 126 126 ...
    ##  $ pro_no4_wnd_normal_mk02_mwh_h_n: num  68.1 67.5 67.6 68.1 67.9 66.9 66.8 67.2 67.3 67.4 ...
    ##  $ pro_no5_wnd_normal_mk02_mwh_h_n: num  80 80.4 80 80.1 80.5 80.5 80.6 80.7 80.4 80.3 ...

``` r
mk_download_file(mk_user = mk_user, mk_password = mk_password, key = "WND_CAP_D_AF", area = "np") %>% str()
```

    ## Classes 'tbl_df' and 'data.frame':   3287 obs. of  17 variables:
    ##  $ date                         : POSIXct, format: "2012-01-03" "2012-01-04" ...
    ##  $ cap_npa_wnd_total_mk02_mw_d_a: num  7485 7486 7488 7490 7491 ...
    ##  $ cap_se_wnd_total_mk02_mw_d_a : num  2785 2786 2787 2788 2789 ...
    ##  $ cap_no_wnd_total_mk02_mw_d_a : num  548 548 549 549 549 ...
    ##  $ cap_dk_wnd_total_mk02_mw_d_a : num  3952 3952 3952 3952 3952 ...
    ##  $ cap_dk1_wnd_total_mk02_mw_d_a: num  2952 2952 2952 2952 2952 ...
    ##  $ cap_dk2_wnd_total_mk02_mw_d_a: num  1000 1000 1000 1000 1000 ...
    ##  $ cap_fi_wnd_total_mk02_mw_d_a : num  200 200 200 200 200 ...
    ##  $ cap_se1_wnd_total_mk02_mw_d_a: num  151 151 151 151 151 151 151 151 151 151 ...
    ##  $ cap_se2_wnd_total_mk02_mw_d_a: num  522 522 523 524 524 ...
    ##  $ cap_se3_wnd_total_mk02_mw_d_a: num  1269 1269 1270 1270 1270 ...
    ##  $ cap_se4_wnd_total_mk02_mw_d_a: num  843 844 844 844 844 ...
    ##  $ cap_no1_wnd_total_mk02_mw_d_a: num  0 0 0 0 0 0 0 0 0 0 ...
    ##  $ cap_no2_wnd_total_mk02_mw_d_a: num  77.9 78.1 78.3 78.5 78.7 78.9 79.1 79.3 79.5 79.7 ...
    ##  $ cap_no3_wnd_total_mk02_mw_d_a: num  330 330 330 330 331 ...
    ##  $ cap_no4_wnd_total_mk02_mw_d_a: num  114 114 114 114 114 ...
    ##  $ cap_no5_wnd_total_mk02_mw_d_a: num  25.9 25.9 25.9 25.9 25.9 25.9 25.9 25.9 25.9 25.9 ...

You can access the info attribute by using the attr function.
